#############################################################
# âœ… PROGRAM-7: HOSTING STATIC WEBSITE ON EC2 (Using Ubuntu)
#############################################################

# STEP 1: Create Networking Components (AWS Console - GUI)
# -------------------------------------------
# â¤ Create VPC        â†’ CIDR: 10.0.0.0/16 â†’ Name: my-vpc
# â¤ Create IGW        â†’ Name: my-igw â†’ Attach to my-vpc
# â¤ Create Subnet     â†’ Name: my-subnet â†’ CIDR: 10.0.1.0/24
# â¤ Create Route Table â†’ Name: my-rt â†’ Attach to my-vpc
# â¤ Edit Routes       â†’ Destination: 0.0.0.0/0 â†’ Target: my-igw
# â¤ Associate Subnet  â†’ my-subnet with my-rt

# STEP 2: Launch EC2 Instance (Ubuntu)
# -------------------------------------------
# â¤ AMI: Ubuntu Server 22.04
# â¤ Instance Type: t2.micro
# â¤ Key Pair: Create/Select and download your-key.pem
# â¤ Network: Select my-vpc, my-subnet, Enable Auto-assign Public IP
# â¤ Security Group:
#     - SSH    â†’ Port 22 â†’ Anywhere (0.0.0.0/0)
#     - HTTP   â†’ Port 80 â†’ Anywhere
#     - HTTPS  â†’ Port 443 â†’ Anywhere
# â¤ Launch Instance

# STEP 3: Connect to EC2 from Terminal (on your PC)
# -------------------------------------------
chmod 400 your-key.pem
ssh -i your-key.pem ubuntu@<your-public-ip>

# STEP 4: Install Apache and Host Static HTML
# -------------------------------------------
sudo apt-get update
sudo apt-get install apache2 -y

# Create a simple HTML page
echo "<!DOCTYPE html>
<html>
<head>
  <title>My EC2 Site</title>
</head>
<body>
  <h1>Welcome to EC2 Static Website</h1>
  <p>Served from Apache on Ubuntu!</p>
</body>
</html>" | sudo tee /var/www/html/index.html

# Enable and start Apache
sudo systemctl enable apache2
sudo systemctl start apache2
sudo systemctl status apache2

# â¤ Open browser â†’ http://<your-public-ip> â†’ Page should be visible ğŸ‰

#############################################################
# âœ… BONUS: HOSTING STATIC WEBSITE USING S3
#############################################################

# STEP 1: Create an S3 Bucket (AWS Console)
# -------------------------------------------
# â¤ Go to S3 â†’ Create Bucket
# â¤ Name: unique-name (e.g., my-html-site-786)
# â¤ Block Public Access: UNCHECK â€œBlock all public accessâ€
# â¤ Create

# STEP 2: Upload Files (AWS Console)
# -------------------------------------------
# â¤ Prepare index.html (static HTML file)
# â¤ Go to bucket â†’ Upload â†’ Add Files â†’ Upload

# STEP 3: Enable Static Website Hosting
# -------------------------------------------
# â¤ Go to Bucket â†’ Properties â†’ Static Website Hosting â†’ Edit
# â¤ Enable
# â¤ Index document: index.html
# â¤ Save

# STEP 4: Set Bucket Policy for Public Access
# -------------------------------------------
# Go to: Bucket â†’ Permissions â†’ Bucket Policy â†’ Paste below:

# Replace 'your-bucket-name' with actual name
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadForWebsite",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::your-bucket-name/*"
    }
  ]
}

# â¤ Save Policy

# STEP 5: Access Website
# -------------------------------------------
# â¤ Go to: Properties â†’ Static Website Hosting â†’ Copy Website URL
# â¤ Paste in browser â†’ Website visible ğŸ‰

# ğŸ”— Reference video for EC2: https://www.youtube.com/watch?v=Islmm-LMu38
# ğŸ”— Reference video for S3 : https://www.youtube.com/watch?v=sI6N0fo0nYQ
